<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
<div class='top'>
<%= render "shared/header" %>
</div>
<div class="profile-show">
  <div class="profile-box">
    <h2 class="name">
      <%= @profile.name %>
    </h2>

    <div class='profile-img'>
      <div class='profile-img-content'>
        <%= image_tag @profile.image.variant(resize:'400x400'), class: 'profile-image' if @profile.image.attached?%>
      </div>
      <div class='explanation'>
         <%= @profile.explanation %>
      </div>
    </div>

    <div class="tab-area">
      <div class="tab active">
      Instagram
      </div>
      <div class="tab">
      Youtube
      </div>
      <div class="tab">
      Twitter
      </div>
    </div>
    <div class="content-area">
      <div class="content show">
        <div class='insta-follower'>Instagramフォロワー
          <%=@profile.insta_follower%><%="人"%>
        </div>

        <div class='reference-value'>
          <table width="900px"height="50px">
          <tr>
          <th colspan="2" width="900px" height="20px">Instagramから認知参考値</th>
          </tr>
          <tr>
          <th width="900px"height="20px">1週間合計インプレッション数</th>
          <td width="40px"height="20px"><%=@profile.insta_impression%>回</td>
          </tr>
          <th width="900px"height="20px">1週間合計リーチ人数</th>
          <td width="40px"height="20px"><%=@profile.insta_reach%>人</td>
          <tr>
          <th colspan="2" width="800px" height="20px">Instagramから誘致参考値</th>
          </tr>
          <tr>
          <th width="900px"height="20px">1週間合計ウェブサイトクリック数</th>
          <td width="40px"height="20px"><%=@profile.insta_click%>回</td>
          </tr>
          <tr>
          <th width="900px"height="20px">1週間合計ウェブサイトクリック率</th>
          <td width="40px"height="20px"><%=@profile.insta_click * 100 / @profile.insta_reach %>%</td>
          </tr>
          </table>
        </div>

        <div class='insta-gender'>男女比率
          <canvas id="gender" width="50" height="8"></canvas> 
            <%= render "shared/chart" %>
            男性<%=@profile.insta_man%>%
            女性<%=@profile.insta_woman%>%
        </div>
        <div class='insta-age-total'>
          <div class='insta-age-graph'>年代比較
            <canvas id="myInstaChart" width="100" height="30"></canvas> 
            <%= render "shared/chart" %>
          </div>
          <div class='insta-age'>
            <table>
              <tr>
              <th>13才-17才</th>
              <th>18才-24才</th>
              <th>25才-34才</th>
              <th>35才-44才</th>
              <th>45才-54才</th>
              <th>54才-64才</th>
              <th>65才+</th>
              </tr>
              <tr>
              <td><%=@profile.insta_age1 %><%="%"%></td>
              <td><%=@profile.insta_age2%><%="%"%></td>
              <td><%=@profile.insta_age3%><%="%"%></td>
              <td><%=@profile.insta_age4%><%="%"%></td>
              <td><%=@profile.insta_age5%><%="%"%></td>
              <td><%=@profile.insta_age6%><%="%"%></td>
              <td><%=@profile.insta_age7%><%="%"%></td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
    
    
    <div class="content">
      <% if @profile.youtube_age1.present?%>
        <div class='youtube-follower'>Youtube登録者数
          <%=@profile.youtube_follower%><%="人"%>
        </div>

        <div class='reference-value'>
          <table width="900px"height="50px">
          <tr>
          <th colspan="2" width="900px" height="20px">Youtubeから認知参考値</th>
          </tr>
          <tr>
          <th width="900px"height="20px">1週間合計インプレッション数</th>
          <td width="40px"height="20px"><%=@profile.youtube_impression%>回</td>
          </tr>
          <br>
          <tr>
          <th width="900px"height="20px">1週間合計視聴者人数</th>
          <td width="40px"height="20px"><%=@profile.audience%>人</td>
          </tr>
          <tr>
          <th width="900px"height="20px">平均視聴率</th>
          <td width="40px"height="20px"><%=@profile.viewing%>%</td>
          </tr>
          </table>
        </div>

        <div class='youtube-gender'>男女比率
          <canvas id="Youtubegender" width="50" height="8"></canvas> 
            <%= render "shared/chart" %>
              男性<%=@profile.youtube_man%>%
              女性<%=@profile.youtube_woman%>%
          </div>
        <div class='youtube-age-total'>
          <div class='youtube-graph'>
            <canvas id="myYoutubeChart" width="100" height="30"></canvas>
              <%= render "shared/chart" %>
          </div>
          <div class='youtube-age'>
            <table>
              <tr>
                <th>13才-17才</th>
                <th>18才-24才</th>
                <th>25才-34才</th>
                <th>35才-44才</th>
                <th>45才-54才</th>
                <th>54才-64才</th>
                <th>65才+</th>
              </tr>
              <tr>
                <td><%=@profile.youtube_age1 %><%="%"%></td>
                <td><%=@profile.youtube_age2%><%="%"%></td>
                <td><%=@profile.youtube_age3%><%="%"%></td>
                <td><%=@profile.youtube_age4%><%="%"%></td>
                <td><%=@profile.youtube_age5%><%="%"%></td>
                <td><%=@profile.youtube_age6%><%="%"%></td>
                <td><%=@profile.youtube_age7%><%="%"%></td>
              </tr>
            </table>
          </div>
        </div>
      <% end %>
    </div>
    

    
    <div class="content">
      <% if @profile.twitter_age1.present?%>
      <div class='twitter-follower'>Twitterフォロワー
          <%=@profile.twitter_follower%><%="人"%>
        </div>
        <div class='reference-value'>
          <table width="900px"height="50px">
            <tr>
            <th colspan="2" width="900px" height="20px">Twitterから認知参考値</th>
            </tr>
            <tr>
            <th width="900px"height="20px">1週間合計インプレッション数</th>
            <td width="40px"height="20px"><%=@profile.twitter_impression%>回</td>
            </tr>
            <th width="900px"height="20px">1週間合計エンゲージメント人数</th>
            <td width="40px"height="20px"><%=@profile.twitter_engagement%>回</td>
            <tr>
            <th width="900px"height="20px">1週間合計エンゲージメント率</th>
            <td width="40px"height="20px"><%=@profile.twitter_click %>%</td> 
            </tr>
            <br>
            <tr>
            <th colspan="2" width="800px" height="40px">Twitterから誘致参考値</th>
            </tr>
            <tr>
            <th width="900px"height="20px">1週間合計ウェブサイトクリック数</th>
            <td width="40px"height="20px"><%=@profile.twitter_click%>回</td>
            </tr>
          </table>
        </div>

        <div class='twitter-gender'>男女比率
          <canvas id="Twittergender" width="50" height="8"></canvas> 
            <%= render "shared/chart" %>
              男性<%=@profile.twitter_man%>%
              女性<%=@profile.twitter_woman%>%
        </div>
        <div class='twitter-age-total'>
          <div class='twitter-age-graph'>年代比較
            <canvas id="mytwitterChart" width="100" height="30"></canvas> 
            <%= render "shared/chart" %>
          </div>
          <div class='twitter-age'>
            <table>
              <tr>
                <th>13才-17才</th>
                <th>18才-24才</th>
                <th>25才-34才</th>
                <th>35才-44才</th>
                <th>45才-54才</th>
                <th>54才-64才</th>
                <th>65才+</th>
              </tr>
              <tr>
                <td><%=@profile.twitter_age1 %><%="%"%></td>
                <td><%=@profile.twitter_age2%><%="%"%></td>
                <td><%=@profile.twitter_age3%><%="%"%></td>
                <td><%=@profile.twitter_age4%><%="%"%></td>
                <td><%=@profile.twitter_age5%><%="%"%></td>
                <td><%=@profile.twitter_age6%><%="%"%></td>
                <td><%=@profile.twitter_age7%><%="%"%></td>
              </tr>
            </table>
          </div>
        </div>
      <% end %>
    </div>
    

       <%# <%ログインユーザーのみ編集と削除可能。他のユーザーは購入画面のみ表示%> 
     <% if user_signed_in? && current_user.id == @profile.user_id %>
     <li> <%= link_to 'アカウント編集', edit_profile_path(@profile.user_id), method: :get, class: "account-btn" %></li>
    <% end %>
    <div>
    <%=link_to 'もどる', root_path, class:"" %> 
    </div>
  </div>
</div>